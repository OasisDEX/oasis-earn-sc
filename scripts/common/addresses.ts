import { constants } from 'ethers'

import { isSupportedNetwork, Network } from './types'

export const ETH_ADDRESS = '0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE'
export const ONE_INCH_V4_ROUTER = '0x1111111254fb6c44bac0bed2854e76f90643097d'

const startBlocks = {
  [Network.MAINNET]: {
    SERVICE_REGISTRY: 14583409,
    AUTOMATION_BOT: 14583413,
  },
  [Network.GOERLI]: {
    SERVICE_REGISTRY: 6707330,
    AUTOMATION_BOT: 6707333,
  },
}

const addresses = {
  [Network.MAINNET]: {
    CDP_MANAGER: '0x5ef30b9986345249bc32d8928B7ee64DE9435E39',
    ILK_REGISTRY: '0x5a464C28D19848f44199D003BeF5ecc87d090F87',
    MCD_VAT: '0x35D1b3F3D7966A1DFe207aa4514C12a259A0492B',
    MCD_JUG: '0x19c0976f590D67707E62397C87829d896Dc0f1F1',
    OSM_MOM: '0x76416A4d5190d071bfed309861527431304aA14f',
    MCD_SPOT: '0x65C79fcB50Ca1594B025960e539eD7A9a6D434A3',
    MCD_JOIN_ETH_A: '0x2F0b23f53734252Bda2277357e97e1517d6B042A',
    MCD_FLASH: '0x1EB4CF3A948E7D72A198fe073cCb8C7a948cD853',
    PROXY_REGISTRY: '0x4678f0a6958e4D2Bc4F1BAF7Bc52E8F3564f3fE4',
    WETH: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
    DAI: '0x6b175474e89094c44da98b954eedeac495271d0f',
    DAI_JOIN: '0x9759A6Ac90977b93B58547b4A71c78317f391A28',
    USDC: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
    DSS_PROXY_ACTIONS: '0x82ecD135Dce65Fbc6DbdD0e4237E0AF93FFD5038',
    MULTIPLY_PROXY_ACTIONS: '0x2a49eae5cca3f050ebec729cf90cc910fadaf7a2',
    ZERO_FEE_EXCHANGE: '0x99e4484dac819aa74b347208752306615213d324',
    SWAP: '0x826E9f2E79cEEA850dF4d4757e0D12115A720D74',
    AUTOMATION_SERVICE_REGISTRY: '0x9b4Ae7b164d195df9C4Da5d08Be88b2848b2EaDA',
    OPERATION_EXECUTOR: '0x53958191c3077eDe3Ca90Eb840283df063FC1be3',
    OPERATIONS_REGISTRY: '0xCcB155E5B2A3201d5e10EdAa6e9F908871d1722B',
    OPERATION_STORAGE: '0x983EFCA0Fd5F9B03f75BbBD41F4BeD3eC20c96d8',
    CDP_ALLOW_ACTION: constants.AddressZero,
    MAKER_OPEN_VAULT_ACTION: constants.AddressZero,
    MAKER_DEPOSIT_ACTION: constants.AddressZero,
    MAKER_GENERATE_ACTION: constants.AddressZero,
    MAKER_PAYBACK_ACTION: constants.AddressZero,
    MAKER_WITHDRAW_ACTION: constants.AddressZero,
    AAVE_BORROW_ACTION: '0x6166B1587be6B954e660A71e4B083A5e0a5bF1b6',
    AAVE_DEPOSIT_ACTION: '0xFAf9D0B7B92e8B281CaF10b42970179B45CA6412',
    AAVE_WITHDRAW_ACTION: '0xECf6CaB5cD20F5f889e95A1A40d46607aa0F41Cf',
    AAVE_PAYBACK_ACTION: '0xeB54C366512c4d59A222A251ea7316568859E08C',
    PULL_TOKEN_ACTION: '0x0bE3B9c118eD4eF2002Fd58d0d8cc8f7c76e168C',
    SEND_TOKEN_ACTION: '0x43C9a445fCf3bc3d1483c0b90DC0346249c0D84C',
    SET_APPROVAL_ACTION: '0xcEA79d9132d6446f0B59F194b22DB2a93dB4146c',
    SWAP_ACTION: '0x7E7EB65A93441a2D2Bf0941216b4c1116B554d85',
    TAKE_FLASHLOAN_ACTION: '0x66cbf69A3290210b1FFa86374c952F056f5E8f80',
    UNWRAP_ETH_ACTION: '0xAC0B1652388Ea425884e6b60e2eD30155f43D50b',
    WRAP_ETH_ACTION: '0xafdD2e556Cef33C5C0033beB76E09b7Bd8d14Dec',
    RETURN_FUNDS_ACTION: '0x645325494A37d35cf6baFc82C3e6bcE4473F2685',
    PULL_TO_PROXY_ACTION: constants.AddressZero,
    POSITION_CREATED: '0xb3f0C5E4012aF22359c9Ab233DABd80cD81F5ec5'
  },
  [Network.GOERLI]: {
    CDP_MANAGER: '0xdcBf58c9640A7bd0e062f8092d70fb981Bb52032',
    ILK_REGISTRY: '0x525FaC4CEc48a4eF2FBb0A72355B6255f8D5f79e',
    MCD_VAT: '0xB966002DDAa2Baf48369f5015329750019736031',
    MCD_JUG: '0xC90C99FE9B5d5207A03b9F28A6E8A19C0e558916',
    OSM_MOM: '0xEdB6b497D2e18A33130CB0D2b70343E6Dcd9EE86',
    MCD_SPOT: '0xACe2A9106ec175bd56ec05C9E38FE1FDa8a1d758',
    MCD_JOIN_ETH_A: '0x2372031bB0fC735722AA4009AeBf66E8BEAF4BA1',
    MCD_FLASH: '0x0a6861D6200B519a8B9CFA1E7Edd582DD1573581',
    PROXY_REGISTRY: '0x46759093D8158db8BB555aC7C6F98070c56169ce',
    WETH: '0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6',
    DAI: '0x11fE4B6AE13d2a6055C8D9cF65c55bac32B5d844',
    DAI_JOIN: '0x6a60b7070befb2bfc964F646efDF70388320f4E0',
    DSS_PROXY_ACTIONS: '',
    MULTIPLY_PROXY_ACTIONS: '0xc9628adc0a9f95D1d912C5C19aaBFF85E420a853',
    ZERO_FEE_EXCHANGE: '',
    AUTOMATION_SERVICE_REGISTRY: '0x5A5277B8c8a42e6d8Ab517483D7D59b4ca03dB7F',
    OPERATION_EXECUTOR: '0xA946f00b58a934824215C1D91346AebbD8702FD4',
    OPERATIONS_REGISTRY: '0xCBf15dc6Dd0A6f47a3529C287A1D140AC0895A1C',
    OPERATION_STORAGE: '0x39d3F3448961262e2FFd29d0ed59e9Bb47a5aF7F',
    SWAP: constants.AddressZero,
    CDP_ALLOW_ACTION: constants.AddressZero,
    MAKER_OPEN_VAULT_ACTION: constants.AddressZero,
    MAKER_DEPOSIT_ACTION: constants.AddressZero,
    MAKER_GENERATE_ACTION: constants.AddressZero,
    MAKER_PAYBACK_ACTION: constants.AddressZero,
    MAKER_WITHDRAW_ACTION: constants.AddressZero,
    AAVE_BORROW_ACTION: '0xa6e1e65dEA4Cb63401E6D62237135D03879d1220',
    AAVE_DEPOSIT_ACTION: '0xb5B29D1074636f35eaee5608514B668dAACE9187',
    AAVE_WITHDRAW_ACTION: '0x65a2670e0d8645b6B32078FD8385943ce96985a7',
    AAVE_PAYBACK_ACTION: '0x542B62427c851B191f263ca69f6e681a7bd3A782',
    PULL_TOKEN_ACTION: '0xf4fb4EC2525928EA89E05a0674f057F3AA9400d7',
    SEND_TOKEN_ACTION: '0x60f14e671B214468a678Cbf1F8d42a1B93FCd6ef',
    SET_APPROVAL_ACTION: '0xb3663eF8404bd66648507F6951d358800AB943da',
    SWAP_ACTION: '0x58338a88f9Df08c4767E42E7Af2E37380d1B3ba5',
    TAKE_FLASHLOAN_ACTION: '0x941D01E6cbFcf094b497D6B2325A7382dc4aD2d1',
    UNWRAP_ETH_ACTION: constants.AddressZero,
    WRAP_ETH_ACTION: constants.AddressZero,
    RETURN_FUNDS_ACTION: constants.AddressZero,
    PULL_TO_PROXY_ACTION: constants.AddressZero,
    POSITION_CREATED: constants.AddressZero,
  },
}

export type AddressRegistry = typeof addresses['mainnet']

export function coalesceNetwork(network: Network) {
  switch (network) {
    case Network.LOCAL:
    case Network.HARDHAT:
      return Network.MAINNET
    default:
      return network
  }
}

export function getAddressesFor(network: string | Network) {
  if (!isSupportedNetwork(network)) {
    throw new Error(
      `Unsupported network provided. Received: ${network}. Expected one of: [${Object.values(
        Network,
      ).join(', ')}}`,
    )
  }
  return addresses[coalesceNetwork(network)]
}

export function getStartBlocksFor(network: string | Network) {
  if (!isSupportedNetwork(network)) {
    throw new Error(
      `Unsupported network provided. Received: ${network}. Expected one of: [${Object.values(
        Network,
      ).join(', ')}}`,
    )
  }

  return startBlocks[coalesceNetwork(network)]
}
